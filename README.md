# Mnemosyne

> ä¸ªäººè®°å¿† MCP Server - åŸºäº Model Context Protocol çš„é•¿æœŸè®°å¿†ç®¡ç†æœåŠ¡

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

Mnemosyne æ˜¯ä¸€ä¸ªåŸºäº MCPï¼ˆModel Context Protocolï¼‰çš„ä¸ªäººè®°å¿†æœåŠ¡ï¼Œä½¿ç”¨ Node.js å’Œ SQLite å®ç°ã€‚å®ƒå…è®¸ AI åŠ©æ‰‹ï¼ˆå¦‚ Claudeï¼‰å­˜å‚¨å’Œæ£€ç´¢ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ã€ç”Ÿæ´»äº‹ä»¶ã€å®ä½“å…³ç³»ç­‰ï¼Œä»è€Œæä¾›æ›´åŠ ä¸ªæ€§åŒ–å’Œè¿è´¯çš„å¯¹è¯ä½“éªŒã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **ç»“æ„æ¸…æ™°**ï¼šå®ä½“-äº‹ä»¶-å±æ€§ä¸‰å±‚æ¨¡å‹ï¼Œæ˜“äºç†è§£å’Œä½¿ç”¨
- âœ… **æ¨¡å‹å‹å¥½**ï¼šä¸»æµ AI æ¨¡å‹éƒ½èƒ½è½»æ¾è°ƒç”¨
- âœ… **è½»é‡éƒ¨ç½²**ï¼šåŸºäº SQLiteï¼ˆçº¯ JS å®ç°ï¼‰ï¼Œå•æ–‡ä»¶å­˜å‚¨ï¼Œ**é›¶ç¼–è¯‘ä¾èµ–**
- âœ… **è·¨å¹³å°å…¼å®¹**ï¼šæ— éœ€ C++ ç¼–è¯‘å·¥å…·ï¼Œæ”¯æŒ Windows/macOS/Linux
- âœ… **å¤šç”¨æˆ·æ”¯æŒ**ï¼šæ”¯æŒå•ç”¨æˆ·/å¤šç”¨æˆ·åœºæ™¯
- âœ… **æ•°æ®æŒä¹…åŒ–**ï¼šé»˜è®¤å­˜å‚¨åœ¨ç”¨æˆ·ç›®å½•ï¼Œæ•°æ®å®‰å…¨å¯é 
- âœ… **è¿œç¨‹åŒæ­¥**ï¼šå¯é€‰çš„ Git åŒæ­¥åŠŸèƒ½ï¼Œæ”¯æŒè·¨è®¾å¤‡æ•°æ®å…±äº«

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…‹éš†æˆ–è¿›å…¥é¡¹ç›®ç›®å½•
cd Mnemosyne

# å®‰è£…ä¾èµ–ï¼ˆæ— éœ€ C++ ç¼–è¯‘å·¥å…·ï¼ï¼‰
npm install

# è¿è¡Œæµ‹è¯•
npm test
```

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä½¿ç”¨ `sql.js`ï¼ˆçº¯ JavaScript å®ç°çš„ SQLiteï¼‰ï¼Œæ— éœ€å®‰è£… Visual Studioã€Xcode æˆ– build-essential ç­‰ C++ ç¼–è¯‘å·¥å…·ã€‚

### å¯åŠ¨æœåŠ¡

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨
npm start

# æˆ–æŒ‡å®šè‡ªå®šä¹‰å‚æ•°
node src/index.js --db-path /custom/path/memory.db --user-id your_user_id
```

### ä¸ Claude Desktop é›†æˆ

ç¼–è¾‘ Claude Desktop é…ç½®æ–‡ä»¶ï¼š
- Windows: `%APPDATA%\Claude\claude_desktop_config.json`
- macOS: `~/Library/Application Support/Claude/claude_desktop_config.json`

æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "mcpServers": {
    "personal-memory": {
      "command": "node",
      "args": ["D:\\Project\\Mnemosyne\\src\\index.js"]
    }
  }
}
```

é‡å¯ Claude Desktop å³å¯ä½¿ç”¨ã€‚

## ğŸ“ æ•°æ®å­˜å‚¨

### é»˜è®¤ä½ç½®

SQLite æ•°æ®åº“é»˜è®¤å­˜å‚¨åœ¨ï¼š
- **Windows**: `C:\Users\<ç”¨æˆ·å>\.mnemosyne\memory.db`
- **macOS/Linux**: `~/.mnemosyne/memory.db`

### æ•°æ®åº“ç‰¹æ€§

- âœ… å¦‚æœæ•°æ®åº“æ–‡ä»¶å·²å­˜åœ¨ï¼Œè‡ªåŠ¨è¯»å–ï¼Œä¸ä¼šé‡æ–°åˆ›å»ºè¡¨
- âœ… ä½¿ç”¨ WAL æ¨¡å¼æé«˜å¹¶å‘æ€§èƒ½
- âœ… æ”¯æŒ JSON å­—æ®µå­˜å‚¨å¤æ‚å±æ€§
- âœ… å®Œæ•´çš„ç´¢å¼•ä¼˜åŒ–

## ğŸ”§ å¯ç”¨å·¥å…·

### ç”¨æˆ·å±æ€§ç®¡ç†

| å·¥å…· | æè¿° |
|------|------|
| `update_profile` | æ›´æ–°æˆ–æ·»åŠ ç”¨æˆ·åŸºç¡€ä¿¡æ¯ |
| `query_profile` | æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ |
| `delete_profile` | åˆ é™¤ç”¨æˆ·å±æ€§ |

### å®ä½“ç®¡ç†

| å·¥å…· | æè¿° |
|------|------|
| `create_entity` | åˆ›å»ºå®ä½“ï¼ˆå® ç‰©ã€æˆ¿äº§ã€è½¦è¾†ã€äººï¼‰ |
| `update_entity` | æ›´æ–°å®ä½“ä¿¡æ¯ |
| `list_entities` | åˆ—å‡ºæ‰€æœ‰å®ä½“ |
| `delete_entity` | åˆ é™¤å®ä½“ï¼ˆè½¯åˆ é™¤ï¼‰ |

### äº‹ä»¶ç®¡ç†

| å·¥å…· | æè¿° |
|------|------|
| `add_event` | è®°å½•æ–°äº‹ä»¶ |
| `search_events` | æœç´¢å†å²äº‹ä»¶ |
| `query_entity_timeline` | æŸ¥è¯¢å®ä½“æ—¶é—´çº¿ |

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯ 1ï¼šä¸ªäººä¿¡æ¯ç®¡ç†

```
ç”¨æˆ·ï¼š"æˆ‘åœ¨åŒ—äº¬çš„å­—èŠ‚è·³åŠ¨ä¸Šç­"

AI è°ƒç”¨ï¼š
â†’ update_profile(key="workplace", value="å­—èŠ‚è·³åŠ¨", category="basic_info")
â†’ update_profile(key="work_location", value="åŒ—äº¬", category="basic_info")
```

### åœºæ™¯ 2ï¼šå® ç‰©ç®¡ç†

```
ç”¨æˆ·ï¼š"æˆ‘å…»äº†åªé‡‘æ¯›å«æ—ºè´¢"

AI è°ƒç”¨ï¼š
â†’ create_entity(entity_type="pet", name="æ—ºè´¢", attributes={"breed": "é‡‘æ¯›"})
â†’ è¿”å› entity_id = 1

ç”¨æˆ·ï¼š"æ—ºè´¢æ˜¨å¤©ç”Ÿç—…äº†ï¼ŒèŠ±äº†2000å—"

AI è°ƒç”¨ï¼š
â†’ add_event(
    event_type="illness",
    description="æ—ºè´¢ç”Ÿç—…å°±åŒ»",
    related_entity_ids=[1],
    metadata={"cost": 2000}
  )

ç”¨æˆ·ï¼š"æ—ºè´¢æœ€è¿‘æ€ä¹ˆæ ·ï¼Ÿ"

AI è°ƒç”¨ï¼š
â†’ query_entity_timeline(entity_id=1)
â†’ åŸºäºæ—¶é—´çº¿æ•°æ®å›å¤ç”¨æˆ·
```

## ğŸ“Š æ•°æ®æ¨¡å‹

### ç”¨æˆ·å±æ€§ (user_profile)
- Key-Value å­˜å‚¨
- æ”¯æŒåˆ†ç±»ï¼šbasic_info, preferences, habits
- åŒ…å«ç½®ä¿¡åº¦å’Œæ›´æ–°æ—¶é—´

### å®ä½“ (entities)
- ç±»å‹ï¼špet, property, vehicle, person
- è‡ªå®šä¹‰å±æ€§ï¼ˆJSON æ ¼å¼ï¼‰
- è½¯åˆ é™¤æ”¯æŒ

### äº‹ä»¶ (events)
- ç±»å‹ï¼špurchase, illness, maintenance, activity, milestone, other
- å¯å…³è”å¤šä¸ªå®ä½“
- æ”¯æŒå…ƒæ•°æ®å’Œé‡è¦æ€§è¯„åˆ†

## ğŸ”„ è¿œç¨‹åŒæ­¥ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰

Mnemosyne æ”¯æŒé€šè¿‡ Git ç§æœ‰ä»“åº“åŒæ­¥æ•°æ®åº“æ–‡ä»¶ï¼Œå®ç°è·¨è®¾å¤‡æ•°æ®å…±äº«ã€‚

### åˆå§‹åŒ–åŒæ­¥

```bash
# åˆå§‹åŒ– Git ä»“åº“å¹¶è®¾ç½®è¿œç¨‹åœ°å€
npm run sync:init -- --remote https://github.com/your-username/mnemosyne-data.git

# é¦–æ¬¡æ¨é€
cd ~/.mnemosyne
git push -u origin main
```

### åŒæ­¥æ“ä½œ

```bash
# åŒå‘åŒæ­¥ï¼ˆæ‹‰å– + æ¨é€ï¼‰
npm run sync

# ä»…æ‹‰å–è¿œç¨‹æ›´æ–°
npm run sync:pull

# ä»…æ¨é€æœ¬åœ°æ›´æ”¹
npm run sync:push

# æŸ¥çœ‹åŒæ­¥çŠ¶æ€
npm run sync:status

# å¼ºåˆ¶åŒæ­¥ï¼ˆè¦†ç›–æœ¬åœ°ï¼‰
npm run sync -- --force
```

### åœ¨å…¶ä»–è®¾å¤‡ä¸Šä½¿ç”¨

```bash
# å…‹éš†æ•°æ®åˆ°æ–°è®¾å¤‡
git clone https://github.com/your-username/mnemosyne-data.git ~/.mnemosyne

# å®‰è£… Mnemosyne
cd /path/to/Mnemosyne
npm install

# å¯åŠ¨æœåŠ¡ï¼ˆä¼šè‡ªåŠ¨ä½¿ç”¨å·²æœ‰æ•°æ®åº“ï¼‰
npm start
```

è¯¦ç»†çš„åŒæ­¥æ–¹æ¡ˆè¯·å‚è€ƒï¼š[Git åŒæ­¥æŒ‡å—](docs/GIT_SYNC.md)

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
Mnemosyne/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js          # MCP Server ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ database.js       # æ•°æ®åº“ç®¡ç†æ¨¡å—
â”‚   â””â”€â”€ utils.js          # å·¥å…·å‡½æ•°
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ sync_db.js        # Git åŒæ­¥è„šæœ¬
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_basic.js     # åŸºç¡€åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ GIT_SYNC.md       # Git åŒæ­¥è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ config.json           # æœåŠ¡é…ç½®
â”œâ”€â”€ package.json
â”œâ”€â”€ README.md             # è®¾è®¡æ–‡æ¡£ï¼ˆåŸå§‹ï¼‰
â”œâ”€â”€ README_USAGE.md       # ä½¿ç”¨æŒ‡å—
â””â”€â”€ README_PROJECT.md     # æœ¬æ–‡ä»¶
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test
```

æµ‹è¯•æ¶µç›–ï¼š
- âœ… æ•°æ®åº“åˆå§‹åŒ–
- âœ… ç”¨æˆ·å±æ€§ CRUD
- âœ… å®ä½“ç®¡ç†
- âœ… äº‹ä»¶ç®¡ç†
- âœ… æ—¶é—´çº¿æŸ¥è¯¢
- âœ… è½¯åˆ é™¤

## ğŸ” å®‰å…¨å»ºè®®

1. **ä½¿ç”¨ç§æœ‰ Git ä»“åº“**ï¼šå¦‚æœå¯ç”¨åŒæ­¥åŠŸèƒ½
2. **SSH å¯†é’¥è®¤è¯**ï¼šæ¯” HTTPS æ›´å®‰å…¨
3. **æ•°æ®åº“åŠ å¯†**ï¼šå¯é€‰ï¼Œä½¿ç”¨ SQLCipher åŠ å¯†æ•°æ®åº“
4. **å®šæœŸå¤‡ä»½**ï¼šæ•°æ®åº“æ–‡ä»¶å¾ˆå°ï¼Œå»ºè®®å®šæœŸå¤‡ä»½

## ğŸ› ï¸ å¼€å‘

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `src/database.js` ä¸­å®ç°æ•°æ®åº“æ“ä½œ
2. åœ¨ `src/index.js` ä¸­æ³¨å†Œ MCP å·¥å…·
3. åœ¨ `tests/` ä¸­æ·»åŠ æµ‹è¯•ç”¨ä¾‹
4. æ›´æ–°æ–‡æ¡£

### è°ƒè¯•

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
$env:DEBUG="*"  # PowerShell
export DEBUG="*"  # Bash

npm start
```

## ğŸ“ æŠ€æœ¯æ ˆ

- **è¿è¡Œæ—¶**: Node.js (ES Modules)
- **æ•°æ®åº“**: SQLite 3 (better-sqlite3)
- **åè®®**: Model Context Protocol (MCP)
- **åŒæ­¥**: Gitï¼ˆå¯é€‰ï¼‰

## ğŸ¤ å¯¹æ¯”è®¾è®¡æ–‡æ¡£

åŸå§‹è®¾è®¡æ–‡æ¡£ä½¿ç”¨ Python å®ç°ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨ Node.js å®Œå…¨é‡æ–°å®ç°ï¼Œä½†ä¿æŒäº†ï¼š
- âœ… ç›¸åŒçš„æ•°æ®æ¨¡å‹
- âœ… ç›¸åŒçš„ MCP å·¥å…·å®šä¹‰
- âœ… ç›¸åŒçš„ä½¿ç”¨åœºæ™¯
- âœ… å¢å¼ºçš„åŠŸèƒ½ï¼ˆGit åŒæ­¥ï¼‰

## ğŸ“„ è®¸å¯è¯

ISC License

## ğŸ”® æœªæ¥è®¡åˆ’

- [ ] å‘é‡æ£€ç´¢æ”¯æŒï¼ˆè¯­ä¹‰æœç´¢ï¼‰
- [ ] Web ç®¡ç†ç•Œé¢
- [ ] è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½
- [ ] æ•°æ®å¯¼å…¥/å¯¼å‡º
- [ ] è¶‹åŠ¿åˆ†æ
- [ ] å¤šè¯­è¨€æ”¯æŒ

## ğŸ“® åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issueã€‚

---

**æ³¨æ„**: æœ¬é¡¹ç›®åŸºäºåŸå§‹è®¾è®¡æ–‡æ¡£ (README.md) ä½¿ç”¨ Node.js å®ç°ã€‚æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆå¹¶é€šè¿‡æµ‹è¯•ã€‚
